'\" t
.\"     Title: git-remote-helpers
.\"    Author: [see the Documentation section]
.\" Generator: DocBook XSL Stylesheets v1.75.2 <http://docbook.sf.net/>
.\"      Date: 01/31/2010
.\"    Manual: Git Manual
.\"    Source: Git 1.7.0.rc1.7.gc0da5
.\"  Language: English
.\"
.TH "GIT\-REMOTE\-HELPERS" "1" "01/31/2010" "Git 1\&.7\&.0\&.rc1\&.7\&.gc0d" "Git Manual"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
git-remote-helpers \- Helper programs for interoperation with remote git
.SH "SYNOPSIS"
.sp
\fIgit remote\-<transport>\fR <remote>
.SH "DESCRIPTION"
.sp
These programs are normally not used directly by end users, but are invoked by various git programs that interact with remote repositories when the repository they would operate on will be accessed using transport code not linked into the main git binary\&. Various particular helper programs will behave as documented here\&.
.SH "COMMANDS"
.sp
Commands are given by the caller on the helper\(aqs standard input, one per line\&.
.PP
\fIcapabilities\fR
.RS 4
Lists the capabilities of the helper, one per line, ending with a blank line\&. Each capability may be preceded with
\fI*\fR\&. This marks them mandatory for git version using the remote helper to understand (unknown mandatory capability is fatal error)\&.
.RE
.PP
\fIlist\fR
.RS 4
Lists the refs, one per line, in the format "<value> <name> [<attr> \&...]"\&. The value may be a hex sha1 hash, "@<dest>" for a symref, or "?" to indicate that the helper could not get the value of the ref\&. A space\-separated list of attributes follows the name; unrecognized attributes are ignored\&. After the complete list, outputs a blank line\&.
.sp
If
\fIpush\fR
is supported this may be called as
\fIlist for\-push\fR
to obtain the current refs prior to sending one or more
\fIpush\fR
commands to the helper\&.
.RE
.PP
\fIoption\fR <name> <value>
.RS 4
Set the transport helper option <name> to <value>\&. Outputs a single line containing one of
\fIok\fR
(option successfully set),
\fIunsupported\fR
(option not recognized) or
\fIerror <msg>\fR
(option <name> is supported but <value> is not correct for it)\&. Options should be set before other commands, and may how those commands behave\&.
.sp
Supported if the helper has the "option" capability\&.
.RE
.PP
\fIfetch\fR <sha1> <name>
.RS 4
Fetches the given object, writing the necessary objects to the database\&. Fetch commands are sent in a batch, one per line, and the batch is terminated with a blank line\&. Outputs a single blank line when all fetch commands in the same batch are complete\&. Only objects which were reported in the ref list with a sha1 may be fetched this way\&.
.sp
Optionally may output a
\fIlock <file>\fR
line indicating a file under GIT_DIR/objects/pack which is keeping a pack until refs can be suitably updated\&.
.sp
Supported if the helper has the "fetch" capability\&.
.RE
.PP
\fIpush\fR +<src>:<dst>
.RS 4
Pushes the given <src> commit or branch locally to the remote branch described by <dst>\&. A batch sequence of one or more push commands is terminated with a blank line\&.
.sp
Zero or more protocol options may be entered after the last
\fIpush\fR
command, before the batch\(aqs terminating blank line\&.
.sp
When the push is complete, outputs one or more
\fIok <dst>\fR
or
\fIerror <dst> <why>?\fR
lines to indicate success or failure of each pushed ref\&. The status report output is terminated by a blank line\&. The option field <why> may be quoted in a C style string if it contains an LF\&.
.sp
Supported if the helper has the "push" capability\&.
.RE
.PP
\fIimport\fR <name>
.RS 4
Produces a fast\-import stream which imports the current value of the named ref\&. It may additionally import other refs as needed to construct the history efficiently\&. The script writes to a helper\-specific private namespace\&. The value of the named ref should be written to a location in this namespace derived by applying the refspecs from the "refspec" capability to the name of the ref\&.
.sp
Supported if the helper has the "import" capability\&.
.RE
.PP
\fIconnect\fR <service>
.RS 4
Connects to given service\&. Standard input and standard output of helper are connected to specified service (git prefix is included in service name so e\&.g\&. fetching uses
\fIgit\-upload\-pack\fR
as service) on remote side\&. Valid replies to this command are empty line (connection established),
\fIfallback\fR
(no smart transport support, fall back to dumb transports) and just exiting with error message printed (can\(aqt connect, don\(aqt bother trying to fall back)\&. After line feed terminating the positive (empty) response, the output of service starts\&. After the connection ends, the remote helper exits\&.
.sp
Supported if the helper has the "connect" capability\&.
.RE
.sp
If a fatal error occurs, the program writes the error message to stderr and exits\&. The caller should expect that a suitable error message has been printed if the child closes the connection without completing a valid response for the current command\&.
.sp
Additional commands may be supported, as may be determined from capabilities reported by the helper\&.
.SH "CAPABILITIES"
.PP
\fIfetch\fR
.RS 4
This helper supports the
\fIfetch\fR
command\&.
.RE
.PP
\fIoption\fR
.RS 4
This helper supports the option command\&.
.RE
.PP
\fIpush\fR
.RS 4
This helper supports the
\fIpush\fR
command\&.
.RE
.PP
\fIimport\fR
.RS 4
This helper supports the
\fIimport\fR
command\&.
.RE
.PP
\fIrefspec\fR \fIspec\fR
.RS 4
When using the import command, expect the source ref to have been written to the destination ref\&. The earliest applicable refspec takes precedence\&. For example "refs/heads/\fB:refs/svn/origin/branches/\fR" means that, after an "import refs/heads/name", the script has written to refs/svn/origin/branches/name\&. If this capability is used at all, it must cover all refs reported by the list command; if it is not used, it is effectively "\fB:\fR"
.RE
.PP
\fIconnect\fR
.RS 4
This helper supports the
\fIconnect\fR
command\&.
.RE
.SH "REF LIST ATTRIBUTES"
.PP
\fIfor\-push\fR
.RS 4
The caller wants to use the ref list to prepare push commands\&. A helper might chose to acquire the ref list by opening a different type of connection to the destination\&.
.RE
.PP
\fIunchanged\fR
.RS 4
This ref is unchanged since the last import or fetch, although the helper cannot necessarily determine what value that produced\&.
.RE
.SH "OPTIONS"
.PP
\fIoption verbosity\fR <N>
.RS 4
Change the level of messages displayed by the helper\&. When N is 0 the end\-user has asked the process to be quiet, and the helper should produce only error output\&. N of 1 is the default level of verbosity, higher values of N correspond to the number of \-v flags passed on the command line\&.
.RE
.PP
\fIoption progress\fR {\fItrue\fR|\fIfalse\fR}
.RS 4
Enable (or disable) progress messages displayed by the transport helper during a command\&.
.RE
.PP
\fIoption depth\fR <depth>
.RS 4
Deepen the history of a shallow repository\&.
.RE
.PP
\fIoption followtags\fR {\fItrue\fR|\fIfalse\fR}
.RS 4
If enabled the helper should automatically fetch annotated tag objects if the object the tag points at was transferred during the fetch command\&. If the tag is not fetched by the helper a second fetch command will usually be sent to ask for the tag specifically\&. Some helpers may be able to use this option to avoid a second network connection\&.
.RE
.sp
\fIoption dry\-run\fR {\fItrue\fR|\fIfalse\fR}: If true, pretend the operation completed successfully, but don\(aqt actually change any repository data\&. For most helpers this only applies to the \fIpush\fR, if supported\&.
.PP
\fIoption servpath <c\-style\-quoted\-path>\fR
.RS 4
Set service path (\-\-upload\-pack, \-\-receive\-pack etc\&.) for next connect\&. Remote helper MAY support this option\&. Remote helper MUST NOT rely on this option being set before connect request occurs\&.
.RE
.SH "DOCUMENTATION"
.sp
Documentation by Daniel Barkalow and Ilari Liusvaara
.SH "GIT"
.sp
Part of the \fBgit\fR(1) suite
